{"componentChunkName":"component---src-templates-post-js","path":"/3u0tt8ojsSMwymuZMxSe1RfP","result":{"data":{"markdownRemark":{"html":"<h4># 生成日期</h4>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>echo</span></span><span>&nbsp;%DATE:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>0,4%.%DATE:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>5,2%.%DATE:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>8,2%</span></span></div></pre></div>\n<p>结果是：xxxx.xx.xx</p>\n<h4># 生成昨天的日期</h4>\n<p>将如下代码制作成 <code>xx.bat</code>。获得昨天日期的方法是 <code>xx.bat -1</code>。同理想获得10天后的日期是 <code>xx.bat 10</code>。</p>\n<!--more-->\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>@</span><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>echo</span></span><span>&nbsp;off&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span>&nbsp;setlocal</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\"><span>if</span></span><span>&nbsp;[%1]==[]&nbsp;goto&nbsp;:Help</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>call&nbsp;:GetDayDiff&nbsp;%date:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>0,10%&nbsp;%1&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span>goto&nbsp;:EOF</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>:GetDayDiff</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>call&nbsp;:Date2Day&nbsp;%1&nbsp;days</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>/a&nbsp;days=%days%+%2</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>call&nbsp;:Day2Date&nbsp;%days%&nbsp;result</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>echo</span></span><span>&nbsp;%result%&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span>goto&nbsp;:EOF</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>:Date2Day</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>setlocal&nbsp;ENABLEEXTENSIONS</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\"><span>for</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--other syntax--loop syntax--shell\"><span>/f</span></span><span>&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>tokens=1-3&nbsp;delims=/-,&nbsp;</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>&nbsp;%%a&nbsp;</span><span class=\"syntax--keyword syntax--control syntax--shell\"><span>in</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--subshell syntax--shell\"><span>(</span></span><span class=\"syntax--string syntax--quoted syntax--single syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&#39;</span></span><span>echo/%1</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&#39;</span></span></span><span class=\"syntax--punctuation syntax--definition syntax--subshell syntax--shell\"><span>)</span></span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--control syntax--shell\"><span>do</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--subshell syntax--shell\"><span>(</span></span><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;yy=%%a&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span>&nbsp;</span><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;mm=%%b&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span>&nbsp;</span><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;dd=%%c&nbsp;</span><span class=\"syntax--punctuation syntax--definition syntax--subshell syntax--shell\"><span>)</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;/a&nbsp;dd=100%dd%%%100,mm=100%mm%%%100</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;/a&nbsp;z=14-mm,z/=12,y=yy+4800-z,m=mm+12</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>z-3,j=153</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>m+2</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;/a&nbsp;j=j/5+dd+y</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>365+y/4-y/100+y/400-2472633</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span>endlocal</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;%2=%j%</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span>goto&nbsp;:EOF</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span>&nbsp;</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span>:Day2Date</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span>setlocal&nbsp;ENABLEEXTENSIONS</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;/a&nbsp;i=%1,a=i+2472632,b=4</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>a+3,b/=146097,c=-b</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>146097,c/=4,c+=a</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;/a&nbsp;d=4</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>c+3,d/=1461,e=-1461</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>d,e/=4,e+=c,m=5</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>e+2,m/=153,dd=153</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>m+2,dd/=5</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;/a&nbsp;dd=-dd+e+1,mm=-m/10,mm</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>=12,mm+=m+3,yy=b</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>100+d-4800+m/10</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--subshell syntax--shell\"><span>(</span></span><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\"><span>if</span></span><span>&nbsp;%mm%&nbsp;LSS&nbsp;10&nbsp;</span><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;mm=0%mm%)</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--subshell syntax--shell\"><span>(</span></span><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\"><span>if</span></span><span>&nbsp;%dd%&nbsp;LSS&nbsp;10&nbsp;</span><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;dd=0%dd%)</span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>endlocal</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;%2=%yy%-%mm%-%dd%</span><span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\"><span>&amp;</span></span><span>goto&nbsp;:EOF</span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>&nbsp;</span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>:Help</span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>echo</span></span><span>&nbsp;xx&nbsp;10&nbsp;显示10天后的时间</span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>echo</span></span><span>&nbsp;xx&nbsp;-5&nbsp;显示&nbsp;5天前的时间</span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--subshell syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--if-block syntax--shell\"><span>rem&nbsp;-------&nbsp;EOF&nbsp;---------</span></span></span></span></span></span></span></span></div></pre></div>\n<hr>","frontmatter":{"path":"/3u0tt8ojsSMwymuZMxSe1RfP","title":"Windows批处理 - 日期","date":"2011-12-30 09:28:12 +0800","comments":true,"categories":"programming","author":"Sir0xb","tags":["windows","bat"]}}},"pageContext":{}},"staticQueryHashes":["3128451518","3649515864"]}