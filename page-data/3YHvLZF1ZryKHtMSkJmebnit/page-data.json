{"componentChunkName":"component---src-templates-post-js","path":"/3YHvLZF1ZryKHtMSkJmebnit","result":{"data":{"markdownRemark":{"html":"<p>思路：每次关闭时，讲日志文件改名成日期时间相关的文件即可。因为 Nginx 启动时会自动生成日志文件。</p>\n<p>bat代码如下：</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>cls</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>@ECHO&nbsp;OFF</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>SET&nbsp;NGINX_PATH=C:</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>SET&nbsp;NGINX_DIR=C:</span><span class=\"syntax--constant syntax--character syntax--escape syntax--shell\"><span>\\n</span></span><span>ginx-1.1.5\\</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>color&nbsp;0a</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>TITLE&nbsp;Nginx管理程序</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>GOTO&nbsp;MENU</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>:MENU</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CLS</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;Nginx&nbsp;Management&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;1&nbsp;启动Nginx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;2&nbsp;关闭Nginx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;3&nbsp;重启Nginx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;4&nbsp;检查配置&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;5&nbsp;退&nbsp;出&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\"><span>*</span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.请输入命令编号:</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\"><span>set</span></span><span>&nbsp;/p&nbsp;ID=</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>%id%</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>==</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>1</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>&nbsp;GOTO&nbsp;cmd1</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>%id%</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>==</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>2</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>&nbsp;GOTO&nbsp;cmd2</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>%id%</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>==</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>3</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>&nbsp;GOTO&nbsp;cmd3</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>%id%</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>==</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>4</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>&nbsp;GOTO&nbsp;cmd4</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>%id%</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>==</span><span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\"><span>&quot;</span></span><span>5</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\"><span>&quot;</span></span></span><span>&nbsp;EXIT</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>PAUSE</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>:cmd1</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>REM&nbsp;-------------&nbsp;启动PHP&nbsp;-------------</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>@ECHO&nbsp;OFF</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>SET&nbsp;PHP_FCGI_MAX_REQUESTS=1000</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.启动PHP&nbsp;FastCGI...</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>RunHiddenConsole&nbsp;%NGINX_DIR%/php-5.3.8/php-cgi.exe&nbsp;-b&nbsp;127.0.0.1:9000&nbsp;-c&nbsp;%NGINX_DIR%/php-5.3.8/php.ini</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>REM&nbsp;-------------&nbsp;启动Nginx&nbsp;-------------</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.启动Nginx......</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;NOT&nbsp;EXIST&nbsp;%NGINX_DIR%nginx.exe&nbsp;ECHO&nbsp;%NGINX_DIR%nginx.exe不存在</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;EXIST&nbsp;%NGINX_DIR%&nbsp;start&nbsp;%NGINX_DIR%nginx.exe</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.OK</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>PAUSE</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>GOTO&nbsp;MENU</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>:cmd2</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>REM&nbsp;-------------&nbsp;日志文件改名&nbsp;-------------</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>SET&nbsp;T1=%DATE:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>0,4%.%DATE:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>5,2%.%DATE:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>8,2%.%</span><span class=\"syntax--keyword syntax--other syntax--shell\"><span>time</span></span><span>:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>0,2%.%</span><span class=\"syntax--keyword syntax--other syntax--shell\"><span>time</span></span><span>:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>3,2%.%</span><span class=\"syntax--keyword syntax--other syntax--shell\"><span>time</span></span><span>:</span><span class=\"syntax--keyword syntax--operator syntax--tilde syntax--shell\"><span>~</span></span><span>6,2%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>SET&nbsp;T2=%T1:&nbsp;=0%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;NOT&nbsp;EXIST&nbsp;%NGINX_DIR%logs</span><span class=\"syntax--constant syntax--character syntax--escape syntax--shell\"><span>\\%</span></span><span>T2%_ACCESS.log&nbsp;ren&nbsp;%NGINX_DIR%logs</span><span class=\"syntax--constant syntax--character syntax--escape syntax--shell\"><span>\\a</span></span><span>ccess.log&nbsp;%T2%_ACCESS.log</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;NOT&nbsp;EXIST&nbsp;%NGINX_DIR%logs</span><span class=\"syntax--constant syntax--character syntax--escape syntax--shell\"><span>\\%</span></span><span>T2%_ERROR.log&nbsp;ren&nbsp;%NGINX_DIR%logs</span><span class=\"syntax--constant syntax--character syntax--escape syntax--shell\"><span>\\e</span></span><span>rror.log&nbsp;%T2%_ERROR.log</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>REM&nbsp;-------------&nbsp;关闭Nginx&nbsp;-------------</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.关闭Nginx......</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>taskkill&nbsp;/F&nbsp;/IM&nbsp;nginx.exe&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\"><span>&gt;</span></span><span>&nbsp;nul</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>REM&nbsp;-------------&nbsp;关闭PHP&nbsp;-------------</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.关闭&nbsp;PHP&nbsp;FastCGI...</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>taskkill&nbsp;/F&nbsp;/IM&nbsp;php-cgi.exe&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\"><span>&gt;</span></span><span>&nbsp;nul</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.OK</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>PAUSE</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>GOTO&nbsp;MENU</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>:cmd3</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>REM&nbsp;-------------&nbsp;关闭Nginx&nbsp;-------------</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.关闭Nginx......</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>taskkill&nbsp;/F&nbsp;/IM&nbsp;nginx.exe&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\"><span>&gt;</span></span><span>&nbsp;nul</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>REM&nbsp;-------------&nbsp;关闭PHP&nbsp;-------------</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.关闭PHP&nbsp;FastCGI...</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>taskkill&nbsp;/F&nbsp;/IM&nbsp;php-cgi.exe&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\"><span>&gt;</span></span><span>&nbsp;nul</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.OK</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>GOTO&nbsp;cmd1</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>GOTO&nbsp;MENU</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>:cmd4</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>REM&nbsp;-------------&nbsp;检查Nginx配置&nbsp;-------------</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.检查Nginx配置......</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;NOT&nbsp;EXIST&nbsp;%NGINX_DIR%nginx.exe&nbsp;ECHO&nbsp;%NGINX_DIR%nginx.exe不存在</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>%NGINX_PATH%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>CD&nbsp;%NGINX_DIR%</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>IF&nbsp;EXIST&nbsp;%NGINX_DIR%&nbsp;%NGINX_DIR%nginx.exe&nbsp;-t</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>ECHO.完成检查</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>PAUSE</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--shell\"><span>GOTO&nbsp;MENU</span></span></div></pre></div>\n<!--more-->\n<p>运行效果如下：</p>\n<img src=\"/images/2011/2011-12-30-101205-1.png\" />\n<p>重新启动 Nginx 后：</p>\n<img src=\"/images/2011/2011-12-30-101205-2.png\" />\n<hr>","frontmatter":{"path":"/3YHvLZF1ZryKHtMSkJmebnit","title":"Windows环境下 Nginx 日志分割","date":"2011-12-30 10:12:05 +0800","comments":true,"categories":"programming","author":"Sir0xb","tags":["nginx","bat"]}}},"pageContext":{}},"staticQueryHashes":["3128451518","3649515864"]}