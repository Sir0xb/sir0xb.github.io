{"data":{"markdownRemark":{"html":"<h3>类的定义：</h3>\n<pre><code class=\"language-javascript\">var Clazz = (function () {\n    var Clazz = function () { },\n        initializing = false\n        superPattern = /xyz/.test(function() { xyz; }) ? /\\b_super\\b/ : /.*/;\n\n    Clazz.create = function (properties) {\n        var _super = this.prototype;\n        initializing = true;\n        var proto = new this();\n        initializing = false;\n\n        for (var name in properties) {\n            proto[name] = typeof properties[name] == \"function\" &#x26;&#x26;\n            typeof _super[name] == \"function\" &#x26;&#x26; superPattern.test(properties[name]) ?\n                (function(name, fn) {\n                    return function() {\n                        var tmp     = this._super;\n                        this._super = _super[name];\n                        var ret     = fn.apply(this, arguments);\n                        this._super = tmp;\n                        return ret;\n                    };\n                })(name, properties[name]) : properties[name];\n        }\n\n        function _Clazz() {\n            if (!initializing &#x26;&#x26; this.init) {\n                this.init.apply(this, arguments);\n            }\n        }\n\n        _Clazz.prototype     = proto;\n        _Clazz.constructor   = Clazz;\n        _Clazz.create        = arguments.callee;\n\n        return _Clazz;\n    }\n\n    return Clazz;\n}());\n</code></pre>\n<!--more-->\n<h2> </h2>\n<h3>类的使用：</h3>\n<pre><code class=\"language-javascript\">var Person = Clazz.create({\n    init: function (isDancing) {\n        this.dancing = isDancing;\n    },\n    dance: function () {\n        return this.dancing;\n    }\n});\n\nvar Child = Person.create({\n    init: function () {\n        this._super(false);\n    },\n    dance: function () {\n        return this._super();\n    },\n    swiming: function () {\n        return true;\n    }\n});\n\nvar person = new Person(true);\nvar child = new Child();\n\nconsole.log('家长能跳舞.');\nconsole.log(person.dance());\n\nconsole.log('孩子能游泳');\nconsole.log(child.swiming());\n\nconsole.log('孩子不会跳舞.');\nconsole.log(child.dance());\n\nconsole.log('家长是人类.');\nconsole.log(person instanceof Person);\n\nconsole.log('孩子也是人类.');\nconsole.log(child instanceof Child &#x26;&#x26; child instanceof Person);\n</code></pre>\n<hr>","frontmatter":{"path":"/ZFR4s3OTFvgwRvL50hiVwpY5","title":"JavaScript实现类效果","author":"Sir0xb","date":"2016-01-27 11:00:00 +0800"}}},"pageContext":{}}