{"data":{"markdownRemark":{"html":"<h3>1.中文乱码问题。</h3>\n<h5># 产生乱码的原因分析。</h5>\n<p>创建图表的时候，会调用 ChartFactory 工厂类，工厂类里的创建函数的内部，会创建 JFreeChart 对象，如下：</p>\n<pre><code class=\"language-java\">JFreeChart chart = new JFreeChart(title, JFreeChart.DEFAULT_TITLE_FONT, plot, legend);\n</code></pre>\n<!--more-->\n<p>其中有个参数是JFreeChart.DEFAULT<em>TITLE</em>FONT，跟进之后会发现其实就是 SansSerif 字体，如下：</p>\n<pre><code class=\"language-java\">public static final Font DEFAULT_TITLE_FONT = new Font(\"SansSerif\", 1, 18);\n</code></pre>\n<p>很多文章说到，用 SansSerif 字体就会产生乱码。真的是这样吗？\n用 jfreechart-1.0.13.jar 会产生乱码，但用 jfreechart-1.0.10.jar 就不会。\n对比两个 jar 包中的 JFreeChart 类，发现 draw 函数进行了更新。\n结论：根本原因不是 SansSerif 字体，而是\nJFreeChart 的作者对默认字体的处理方式发生了变化。</p>\n<h2> </h2>\n<h3>2.TimeSeriesChart    X坐标轴显示问题。包括显示的单位和现实的格式。</h3>\n<h5># 产生此问题的原因是，程序员对 API 的不了解造成的，很过功能在开发 API 的时候已经考虑进去了。</h5>\n<h2> </h2>\n<h3>3.LineChart 底部乱码问题。</h3>\n<h5># Winux 将 JFreeChart 做成了 Servlet 。</h5>\n<p>Servlet 从 URL 中获得参数之后，并没有转码，直接提交到了，JFreeChart 数据构建函数。\n用如下方法转码之后，问题成功解决。</p>\n<pre><code class=\"language-java\">new String(str.getBytes(\"iso-8859-1\"))\n</code></pre>\n<h2> </h2>\n<h4>目前已解决 1 和 2，3正在研究。</h4>\n<p>解决方案如下：</p>\n<pre><code class=\"language-java\">package com.winux.GetChart;\n\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.text.SimpleDateFormat;\n\nimport org.jfree.chart.JFreeChart;\nimport org.jfree.chart.axis.*;\nimport org.jfree.chart.plot.*;\n\npublic class NewJFreeChart {\n    //轴字体\n    static Font font = new Font(\"宋体\", Font.PLAIN, 16);\n    //标题字体\n    static Font titleFont = new Font(\"隶书\", Font.BOLD, 25);\n\n    //设置标题和底部字体\n    private static void setTitleAndLegend(JFreeChart chart){\n        chart.getTitle().setFont(titleFont);\n        chart.getLegend().setItemFont(font);\n    }\n\n    // 设置柱状图坐标轴字体\n    public static void setBarChartLabelFont(JFreeChart chart) {\n        setTitleAndLegend(chart);\n\n        //X轴字体 &#x26;amp; 颜色 &#x26;amp; 倾斜\n        chart.getCategoryPlot().getDomainAxis().setLabelFont(font);\n        chart.getCategoryPlot().getDomainAxis().setTickLabelFont(font);\n        chart.getCategoryPlot().getDomainAxis().setTickLabelPaint(Color.BLUE);\n        chart.getCategoryPlot().getDomainAxis().setCategoryLabelPosition s(CategoryLabelPositions.UP_45);\n\n        //Y轴字体 &#x26;amp; 颜色\n        chart.getCategoryPlot().getRangeAxis().setLabelFont(font);\n        chart.getCategoryPlot().getRangeAxis().setTickLabelFont(font);\n        chart.getCategoryPlot().getRangeAxis().setTickLabelPaint(Color.BLUE);\n    }\n\n    // 设置饼状图坐标轴字体\n    public static void setPieChartLabelFont(JFreeChart chart) {\n        setTitleAndLegend(chart);\n\n        //饼图字体\n        ((PiePlot) chart.getPlot()).setLabelFont(font);\n    }\n\n    // 设置时序图坐标轴字体            ---  第二个参数是例如“YYYY”的字符串\n    public static void setTimeSeriesChartLabelF ont(JFreeChart chart, String DateFormat) {\n        setTitleAndLegend(chart);\n\n        //日期显示格式\n        DateAxis dateaxis = (DateAxis) ((XYPlot) chart.getPlot()).getDomainAxis();\n        dateaxis.setDateFormatOverride(new SimpleDateFormat(DateFormat));\n        //设置坐标间隔。DateTickUnitType.YEAR 是单位，后面 1 是间隔。\n        dateaxis.setTickUnit(new DateTickUnit(DateTickUnitType.YEAR, 1));\n\n        //X轴字体 &#x26;amp; 颜色\n        ((XYPlot) chart.getPlot()).getDomainAxis().setLabelFont(font);\n        ((XYPlot) chart.getPlot()).getDomainAxis().setTickLabelFont(font);\n        ((XYPlot) chart.getPlot()).getDomainAxis().setTickLabelPaint(Color.BLUE);\n\n        //Y轴字体 &#x26;amp; 颜色\n        ((XYPlot) chart.getPlot()).getRangeAxis().setLabelFont(font);\n        ((XYPlot) chart.getPlot()).getRangeAxis().setTickLabelFont(font);\n        ((XYPlot) chart.getPlot()).getRangeAxis().setTickLabelPaint(Color.BLUE);\n    }\n\n    // 设置线图图坐标轴字体\n    public static void setLineChartLabelFont(JFreeChart chart) {\n        setTitleAndLegend(chart);\n\n        //X轴字体 &#x26;amp; 颜色 &#x26;amp; 倾斜\n        chart.getCategoryPlot().getDomainAxis().setTickLabelFont(font);\n        chart.getCategoryPlot().getDomainAxis().setLabelFont(font);\n        chart.getCategoryPlot().getDomainAxis().setTickLabelPaint(Color.BLUE);\n        chart.getCategoryPlot().getDomainAxis().setCategoryLabelPosition s(CategoryLabelPositions.UP_45);\n\n        //Y轴字体 &#x26;amp; 颜色\n        ((NumberAxis) chart.getCategoryPlot().getRangeAxis()).setTickLabelFont(font);\n        ((NumberAxis) chart.getCategoryPlot().getRangeAxis()).setLabelFont(font);\n        ((NumberAxis) chart.getCategoryPlot().getRangeAxis()).setTickLabelPaint(Color.BLUE);\n    }\n}\n</code></pre>\n<hr>","frontmatter":{"path":"/nz0JfJ4s6nQaGlWueyCki7NO","title":"JFreeChart 各种问题","date":"2011-04-16 13:00:11 +0800","comments":true,"categories":"programming","author":"Sir0xb","tags":["java","jfreechart"]}}},"pageContext":{}}