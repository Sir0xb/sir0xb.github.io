{"data":{"markdownRemark":{"html":"<h5># 下载php</h5>\n<p><a target=\"_blank\" href=\"http://windows.php.net/download/\">http://windows.php.net/download/</a></p>\n<p>下载 Non Thread Safe 版本，本人下了个zip绿色版本的。</p>\n<h5># php部署到哪儿无所谓，主要是给Nginx用的，所以放Nginx目录下了。</h5>\n<h5># 找到 php.ini-development 文件，更名为 php.ini</h5>\n<h5># 修改 php.ini 配置参数：</h5>\n<pre><code class=\"language-bash\">; extension_dir = \"ext\"\n</code></pre>\n<!--more-->\n<p>修改成(下面是本人的配置，根据自己的进行修改)：</p>\n<pre><code class=\"language-bash\">extension_dir = \" C:/nginx-1.1.5/php-5.3.8/ext\"\n</code></pre>\n<p>开启如下配置注释：</p>\n<pre><code class=\"language-bash\">extension=php_curl.dll\nextension=php_gd2.dll\nextension=php_mbstring.dll\nextension=php_mysql.dll\nextension=php_pdo_odbc.dll\nextension=php_xmlrpc.dll\n</code></pre>\n<p>php 的 Session 也配一个吧，应该都没关系(随便建了个 temp 文件夹)：</p>\n<pre><code class=\"language-bash\">session.save_path = \"C:/nginx-1.1.5/php-5.3.8/temp\"\n</code></pre>\n<h5># 之后就是配置 nginx.conf 文件了，粉色部分是新加的：</h5>\n<pre><code class=\"language-bash\">server {\nlisten       80;\n    server_name  Dojo;\n    charset utf-8;\n\n    location / {\n       #主目录，相当于webapps目录\n       root   WebServer/Dojo;\n\n       #开启目录浏览\n       autoindex on;\n    }\n\n   location ~ \\.php$ {\n       root           WebServer/Dojo;\n       fastcgi_pass   127.0.0.1:9000;\n       fastcgi_index  index.php;\n       fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n      include        fastcgi_params;\n   }\n}\n</code></pre>\n<h4># 下载一个小工具，配置启动 bat 的时候用得上，解压后把 exe 文件丢到 php 住目录下即可。</h4>\n<p><a target=\"_blank\" href=\"http://redmine.lighttpd.net/attachments/660/RunHiddenConsole.zip\">http://redmine.lighttpd.net/attachments/660/RunHiddenConsole.zip</a></p>\n<h4># 还有一步是必须的，就是启动 Nginx 的时候，同时把 php 也启动了。还是修改启动 bat 文件为例吧。</h4>\n<pre><code class=\"language-bash\">cls\n@ECHO OFF\nSET NGINX_PATH=C:\nSET NGINX_DIR=C:\\nginx-1.1.5\\\ncolor 0a\nTITLE Nginx管理程序\nGOTO MENU\n:MENU\nCLS\nECHO.\nECHO. * * * *  Nginx Management  * * *\nECHO. *                                *\nECHO. *   1 启动Nginx                  *\nECHO. *                                *\nECHO. *   2 关闭Nginx                  *\nECHO. *                                *\nECHO. *   3 重启Nginx                  *\nECHO. *                                *\nECHO. *   4 检查配置                   *\nECHO. *                                *\nECHO. *   5 退 出                      *\nECHO. *                                *\nECHO. * * * * * * * * * * * * * * * * *\nECHO.\nECHO.请输入命令编号:\nset /p ID=\nIF \"%id%\"==\"1\" GOTO cmd1\nIF \"%id%\"==\"2\" GOTO cmd2\nIF \"%id%\"==\"3\" GOTO cmd3\nIF \"%id%\"==\"4\" GOTO cmd4\nIF \"%id%\"==\"5\" EXIT\nPAUSE\n\n:cmd1\nECHO.\n\n@ECHO OFF\nSET PHP_FCGI_MAX_REQUESTS=1000\nECHO.启动PHP FastCGI...\nRunHiddenConsole C:/nginx-1.1.5/php-5.3.8/php-cgi.exe -b 127.0.0.1:9000 -c C:/nginx-1.1.5/php-5.3.8/php.ini\n\nECHO.启动Nginx......\nIF NOT EXIST %NGINX_DIR%nginx.exe ECHO %NGINX_DIR%nginx.exe不存在\n%NGINX_PATH%\ncd %NGINX_DIR%\nIF EXIST %NGINX_DIR% start %NGINX_DIR%nginx.exe\nECHO.OK\nPAUSE\nGOTO MENU\n\n:cmd2\nECHO.\nECHO.关闭Nginx......\ntaskkill /F /IM nginx.exe > nul\nECHO.关闭 PHP FastCGI...\ntaskkill /F /IM php-cgi.exe > nul\nECHO.OK\nPAUSE\nGOTO MENU\n\n:cmd3\nECHO.\nECHO.关闭Nginx......\ntaskkill /F /IM nginx.exe > nul\nECHO.关闭PHP FastCGI...\ntaskkill /F /IM php-cgi.exe > nul\nECHO.OK\nGOTO cmd1\nGOTO MENU\n\n:cmd4\nECHO.\nECHO.检查Nginx配置......\nIF NOT EXIST %NGINX_DIR%nginx.exe ECHO %NGINX_DIR%nginx.exe不存在\n%NGINX_PATH%\ncd %NGINX_DIR%\nIF EXIST %NGINX_DIR% %NGINX_DIR%nginx.exe -t\nECHO.完成检查\nPAUSE\nGOTO MENU\n</code></pre>\n<h4># 完成之后可以用 php 页面测试一下。</h4>\n<pre><code class=\"language-html\">&#x3C;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Frameset//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd\">\n&#x3C;head>\n&#x3C;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n&#x3C;title>xampp 的 php 开发环境测试页面&#x3C;/title>\n&#x3C;script type=\"text/javascript\" >\n    function thisClose(){\n            window.close();\n        }\n&#x3C;/script>\n&#x3C;/head>\n&#x3C;body>\n&#x3C;?php\n\n    for($i = 1;$i &#x3C;= 10; $i++) {\n            echo \"$i.这是一个测试页面。&#x3C;br />\";\n        }\n\n?>\n&#x3C;input id=\"btnClose\" type=\"button\" value=\"关闭窗口\" onclick=\"thisClose()\" />\n&#x3C;/body>\n&#x3C;/html>\n</code></pre>\n<p>效果如下：</p>\n<img src=\"https://i.imgur.com/FUbbJvr.png\" />\n<hr>","frontmatter":{"path":"/57OmkmFgj9nDjNmgYbvM6kQy","title":"Windows 环境下 Nginx 配置 php","author":"Sir0xb","date":"2011-12-26 11:40:22 +0800"}}},"pageContext":{}}