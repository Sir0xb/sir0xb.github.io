{"data":{"markdownRemark":{"html":"<h4># 生成日期</h4>\n<pre><code class=\"language-bash\">echo %DATE:~0,4%.%DATE:~5,2%.%DATE:~8,2%\n</code></pre>\n<p>结果是：xxxx.xx.xx</p>\n<h4># 生成昨天的日期</h4>\n<p>将如下代码制作成 <code>xx.bat</code>。获得昨天日期的方法是 <code>xx.bat -1</code>。同理想获得10天后的日期是 <code>xx.bat 10</code>。</p>\n<!--more-->\n<pre><code class=\"language-bash\">@echo off &#x26; setlocal\n\nif [%1]==[] goto :Help\ncall :GetDayDiff %date:~0,10% %1 &#x26;goto :EOF\n\n:GetDayDiff\ncall :Date2Day %1 days\nset/a days=%days%+%2\ncall :Day2Date %days% result\necho %result% &#x26;goto :EOF\n\n:Date2Day\nsetlocal ENABLEEXTENSIONS\nfor /f \"tokens=1-3 delims=/-, \" %%a in ('echo/%1') do (set yy=%%a &#x26; set mm=%%b &#x26; set dd=%%c )\nset /a dd=100%dd%%%100,mm=100%mm%%%100\nset /a z=14-mm,z/=12,y=yy+4800-z,m=mm+12*z-3,j=153*m+2\nset /a j=j/5+dd+y*365+y/4-y/100+y/400-2472633\nendlocal&#x26;set %2=%j%&#x26;goto :EOF\n\n:Day2Date\nsetlocal ENABLEEXTENSIONS\nset /a i=%1,a=i+2472632,b=4*a+3,b/=146097,c=-b*146097,c/=4,c+=a\nset /a d=4*c+3,d/=1461,e=-1461*d,e/=4,e+=c,m=5*e+2,m/=153,dd=153*m+2,dd/=5\nset /a dd=-dd+e+1,mm=-m/10,mm*=12,mm+=m+3,yy=b*100+d-4800+m/10\n(if %mm% LSS 10 set mm=0%mm%)&#x26;(if %dd% LSS 10 set dd=0%dd%)\nendlocal&#x26;set %2=%yy%-%mm%-%dd%&#x26;goto :EOF\n\n:Help\necho xx 10 显示10天后的时间\necho xx -5 显示 5天前的时间\nrem ------- EOF ---------\n</code></pre>\n<hr>","frontmatter":{"path":"/3u0tt8ojsSMwymuZMxSe1RfP","title":"Windows批处理 - 日期","author":"Sir0xb","date":"2011-12-30 09:28:12 +0800"}}},"pageContext":{}}