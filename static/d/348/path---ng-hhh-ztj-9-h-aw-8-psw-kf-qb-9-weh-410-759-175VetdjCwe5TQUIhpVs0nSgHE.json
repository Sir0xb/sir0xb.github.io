{"data":{"markdownRemark":{"html":"<p>以前用 <code>hexo</code> 维护网站的时候评论系统用的是多说，虽然 <code>octopress</code> 自带了一个 <code>disqus</code> 评论系统，不过感觉还是没有多说强大。所以这次改版之后也决定用多说。</p>\n<h2> </h2>\n<h3>添加文章评论</h3>\n<p>在 <code>_config.yml</code> 中找到 <code>disqus</code> 配置</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text plain null-grammar\"><span>#&nbsp;Disqus&nbsp;Comments</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>disqus_short_name:</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>disqus_show_comment_count:&nbsp;false</span></span></div></pre>\n<!--more-->\n<p>在下面添加</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text plain null-grammar\"><span>duoshuo_comments:&nbsp;true</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>duoshuo_short_name:&nbsp;xxxxxx&nbsp;&nbsp;#&nbsp;多说帐号</span></span></div></pre>\n<p>在 <code>source/_layouts/post.html</code> 中的 <code>disqus</code> 代码</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;if&nbsp;site.disqus_short_name&nbsp;and&nbsp;page.comments&nbsp;==&nbsp;true&nbsp;%}</span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag block any html\"><span>section</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag block any html\"><span>h1</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span><span class=\"meta tag any html\"><span class=\"punctuation definition tag html\"><span>&lt;</span></span><span class=\"entity name tag html\"><span>i</span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>class</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>fa&nbsp;fa-comments</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag html\"><span>&gt;</span><span class=\"meta scope between-tag-pair html\"><span>&lt;</span></span><span>/</span></span><span class=\"entity name tag html\"><span>i</span></span><span class=\"punctuation definition tag html\"><span>&gt;</span></span></span><span>&nbsp;Comments</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag block any html\"><span>h1</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag block any html\"><span>div</span></span><span>&nbsp;</span><span class=\"meta attribute-with-value id html\"><span class=\"entity other attribute-name id html\"><span>id</span></span><span class=\"punctuation separator key-value html\"><span>=</span></span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span class=\"meta toc-list id html\"><span>disqus_thread</span></span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>aria-live</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>polite</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span><span>{%&nbsp;include&nbsp;post/disqus_thread.html&nbsp;%}</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag block any html\"><span>div</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag block any html\"><span>section</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;endif&nbsp;%}</span></span></div></pre>\n<p>下面添加多说的模块</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;if&nbsp;site.duoshuo_short_name&nbsp;and&nbsp;site.duoshuo_comments&nbsp;==&nbsp;true&nbsp;and&nbsp;page.comments&nbsp;==&nbsp;true&nbsp;%}</span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag block any html\"><span>section</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag block any html\"><span>h1</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span><span class=\"meta tag any html\"><span class=\"punctuation definition tag html\"><span>&lt;</span></span><span class=\"entity name tag html\"><span>i</span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>class</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>fa&nbsp;fa-comments</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag html\"><span>&gt;</span><span class=\"meta scope between-tag-pair html\"><span>&lt;</span></span><span>/</span></span><span class=\"entity name tag html\"><span>i</span></span><span class=\"punctuation definition tag html\"><span>&gt;</span></span></span><span>&nbsp;Comments</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag block any html\"><span>h1</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag block any html\"><span>div</span></span><span>&nbsp;</span><span class=\"meta attribute-with-value id html\"><span class=\"entity other attribute-name id html\"><span>id</span></span><span class=\"punctuation separator key-value html\"><span>=</span></span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span class=\"meta toc-list id html\"><span>comments</span></span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>aria-live</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>polite</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span><span>{%&nbsp;include&nbsp;post/duoshuo.html&nbsp;%}</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag block any html\"><span>div</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag block any html\"><span>section</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;endif&nbsp;%}</span></span></div></pre>\n<p>然后创建上面代码提及的新文件 <code>post/duoshuo.html</code> 具体路径是 <code>source/_includes/post/duoshuo.html</code></p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text html basic\"><span class=\"comment block html\"><span class=\"punctuation definition comment html\"><span>&lt;!--</span></span><span>&nbsp;多说评论框&nbsp;start&nbsp;</span><span class=\"punctuation definition comment html\"><span>--&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"meta tag any html\"><span class=\"punctuation definition tag html\"><span>&lt;</span></span><span class=\"entity name tag html\"><span>div</span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>class</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>ds-thread</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-thread-key</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{%&nbsp;if&nbsp;site.titlecase&nbsp;%}{{&nbsp;page.title&nbsp;|&nbsp;titlecase&nbsp;}}{%&nbsp;else&nbsp;%}{{&nbsp;page.title&nbsp;}}{%&nbsp;endif&nbsp;%}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-title</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{%&nbsp;if&nbsp;site.titlecase&nbsp;%}{{&nbsp;page.title&nbsp;|&nbsp;titlecase&nbsp;}}{%&nbsp;else&nbsp;%}{{&nbsp;page.title&nbsp;}}{%&nbsp;endif&nbsp;%}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-url</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{{page.previous.url}}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag html\"><span>&gt;</span><span class=\"meta scope between-tag-pair html\"><span>&lt;</span></span><span>/</span></span><span class=\"entity name tag html\"><span>div</span></span><span class=\"punctuation definition tag html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"comment block html\"><span class=\"punctuation definition comment html\"><span>&lt;!--</span></span><span>&nbsp;多说评论框&nbsp;end&nbsp;</span><span class=\"punctuation definition comment html\"><span>--&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"comment block html\"><span class=\"punctuation definition comment html\"><span>&lt;!--</span></span><span>&nbsp;多说公共JS代码&nbsp;start&nbsp;(一个网页只需插入一次)&nbsp;</span><span class=\"punctuation definition comment html\"><span>--&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span class=\"punctuation definition tag html\"><span>&lt;</span></span><span class=\"entity name tag script html\"><span>script</span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>type</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>text/javascript</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;duoshuoQuery&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta brace curly js\"><span>{</span></span><span>short_name</span><span class=\"keyword operator assignment js\"><span>:</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>{{&nbsp;site.duoshuo_short_name&nbsp;}}</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>\t</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>\t\t</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;ds&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"support variable dom js\"><span>document</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>createElement</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>script</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>\t\t</span><span class=\"variable other object js\"><span>ds</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property dom js\"><span>type</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>text/javascript</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span><span class=\"variable other object js\"><span>ds</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>async</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"constant language boolean true js\"><span>true</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>\t\t</span><span class=\"variable other object js\"><span>ds</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>src</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"support variable dom js\"><span>document</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property dom js\"><span>location</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property dom js\"><span>protocol</span></span><span>&nbsp;</span><span class=\"keyword operator comparison js\"><span>==</span></span><span>&nbsp;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>https:</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span>&nbsp;</span><span class=\"keyword operator ternary js\"><span>?</span></span><span>&nbsp;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>https:</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span>&nbsp;</span><span class=\"keyword operator ternary js\"><span>:</span></span><span>&nbsp;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>http:</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"meta brace round js\"><span>)</span></span><span>&nbsp;</span><span class=\"keyword operator js\"><span>+</span></span><span>&nbsp;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>//static.duoshuo.com/embed.js</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>\t\t</span><span class=\"variable other object js\"><span>ds</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property dom js\"><span>charset</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>UTF-8</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>\t\t</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"support variable dom js\"><span>document</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>getElementsByTagName</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>head</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric decimal js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>\t\t&nbsp;</span><span class=\"keyword operator logical js\"><span>||</span></span><span>&nbsp;</span><span class=\"support variable dom js\"><span>document</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>getElementsByTagName</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>body</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric decimal js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>appendChild</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>ds</span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>\t</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span><span>(</span><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span class=\"punctuation definition tag html\"><span>&lt;/</span></span><span class=\"entity name tag script html\"><span>script</span></span><span class=\"punctuation definition tag html\"><span>&gt;</span></span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"comment block html\"><span class=\"punctuation definition comment html\"><span>&lt;!--</span></span><span>&nbsp;多说公共JS代码&nbsp;end&nbsp;</span><span class=\"punctuation definition comment html\"><span>--&gt;</span></span></span></span></div></pre>\n<h5>* 这里注意一下 <code>data-thread-key</code> 属性，如果不写，控制台会有警告信息。设置成跟 <code>data-title</code> 一样就好。</h5>\n<p>学 <code>disqus</code> 的实现方式，在文章头部也再加个评论按钮。修改 <code>_includes/article.html</code> 文件。</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;if&nbsp;site.disqus_short_name&nbsp;and&nbsp;page.comments&nbsp;!=&nbsp;false&nbsp;and&nbsp;post.comments&nbsp;!=&nbsp;false&nbsp;and&nbsp;site.disqus_show_comment_count&nbsp;==&nbsp;true&nbsp;%}</span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;|&nbsp;</span><span class=\"meta tag inline any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag inline any html\"><span>a</span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>href</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{%&nbsp;if&nbsp;index&nbsp;%}{{&nbsp;root_url&nbsp;}}{{&nbsp;post.url&nbsp;}}{%&nbsp;endif&nbsp;%}#disqus_thread</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"meta tag inline any html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-disqus-identifier</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{%&nbsp;if&nbsp;post.meta.disqus_id&nbsp;%}{{&nbsp;post.meta.disqus_id&nbsp;}}{%&nbsp;else&nbsp;%}{{&nbsp;site.url&nbsp;}}{{&nbsp;post.url&nbsp;}}{%&nbsp;endif&nbsp;%}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span><span>Comments</span><span class=\"meta tag inline any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag inline any html\"><span>a</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;endif&nbsp;%}</span></span></div></pre>\n<p>下方添加多说代码部分</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;if&nbsp;site.duoshuo_short_name&nbsp;and&nbsp;page.comments&nbsp;!=&nbsp;false&nbsp;and&nbsp;post.comments&nbsp;!=&nbsp;false&nbsp;and&nbsp;site.duoshuo_comments&nbsp;==&nbsp;true&nbsp;%}</span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;|&nbsp;</span><span class=\"meta tag inline any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag inline any html\"><span>a</span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>href</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{%&nbsp;if&nbsp;index&nbsp;%}{{&nbsp;root_url&nbsp;}}{{&nbsp;post.url&nbsp;}}{%&nbsp;endif&nbsp;%}#comments</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span><span>评论</span><span class=\"meta tag inline any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag inline any html\"><span>a</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;endif&nbsp;%}</span></span></div></pre>\n<p>基本功能大功告成</p>\n<h2> </h2>\n<h3>侧边栏现实最新评论</h3>\n<p>在 _config.yml 添加如下配置:</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text plain null-grammar\"><span>duoshuo_asides:&nbsp;false&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;是否显示侧边栏</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>duoshuo_asides_num:&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;侧边栏评论显示条目数</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>duoshuo_asides_avatars:&nbsp;0&nbsp;&nbsp;&nbsp;#&nbsp;侧边栏评论是否显示头像</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>duoshuo_asides_time:&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;侧边栏评论是否显示时间</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>duoshuo_asides_title:&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;侧边栏评论是否显示标题</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>duoshuo_asides_admin:&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;侧边栏评论是否显示作者评论</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>duoshuo_asides_length:&nbsp;18&nbsp;&nbsp;&nbsp;#&nbsp;侧边栏评论截取的长度</span></span></div></pre>\n<p>还需要在侧边栏插件文件夹创建评论代码</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;if&nbsp;site.duoshuo_asides&nbsp;%}</span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag block any html\"><span>section</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;</span></span><span class=\"entity name tag block any html\"><span>h1</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span><span class=\"meta tag any html\"><span class=\"punctuation definition tag html\"><span>&lt;</span></span><span class=\"entity name tag html\"><span>i</span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>class</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>fa&nbsp;fa-comments</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag html\"><span>&gt;</span><span class=\"meta scope between-tag-pair html\"><span>&lt;</span></span><span>/</span></span><span class=\"entity name tag html\"><span>i</span></span><span class=\"punctuation definition tag html\"><span>&gt;</span></span></span><span>&nbsp;Recent&nbsp;Comments</span><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag block any html\"><span>h1</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta tag any html\"><span class=\"punctuation definition tag html\"><span>&lt;</span></span><span class=\"entity name tag html\"><span>ul</span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>class</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>ds-recent-comments</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-num-items</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{{&nbsp;site.duoshuo_asides_num&nbsp;}}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-show-avatars</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{{&nbsp;site.duoshuo_asides_avatars&nbsp;}}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-show-time</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{{&nbsp;site.duoshuo_asides_time&nbsp;}}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-show-title</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{{&nbsp;site.duoshuo_asides_title&nbsp;}}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-show-admin</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{{&nbsp;site.duoshuo_asides_admin&nbsp;}}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>data-excerpt-length</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>{{&nbsp;site.duoshuo_asides_length&nbsp;}}</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag html\"><span>&gt;</span><span class=\"meta scope between-tag-pair html\"><span>&lt;</span></span><span>/</span></span><span class=\"entity name tag html\"><span>ul</span></span><span class=\"punctuation definition tag html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;if&nbsp;index&nbsp;%}</span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment block html\"><span class=\"punctuation definition comment html\"><span>&lt;!--</span></span><span>多说js加载开始，一个页面只需要加载一次&nbsp;</span><span class=\"punctuation definition comment html\"><span>--&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition tag html\"><span>&lt;</span></span><span class=\"entity name tag script html\"><span>script</span></span><span>&nbsp;</span><span class=\"entity other attribute-name html\"><span>type</span></span><span>=</span><span class=\"string quoted double html\"><span class=\"punctuation definition string begin html\"><span>&quot;</span></span><span>text/javascript</span><span class=\"punctuation definition string end html\"><span>&quot;</span></span></span><span class=\"punctuation definition tag html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;duoshuoQuery&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta brace curly js\"><span>{</span></span><span>short_name</span><span class=\"keyword operator assignment js\"><span>:</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>{{&nbsp;site.duoshuo_short_name&nbsp;}}</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;ds&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"support variable dom js\"><span>document</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>createElement</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>script</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>ds</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property dom js\"><span>type</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>text/javascript</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span><span class=\"variable other object js\"><span>ds</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>async</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"constant language boolean true js\"><span>true</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>ds</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>src</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span class=\"markup underline link http hyperlink\"><span>http://static.duoshuo.com/embed.js</span></span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>ds</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property dom js\"><span>charset</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>UTF-8</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"support variable dom js\"><span>document</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>getElementsByTagName</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>head</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric decimal js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span>&nbsp;</span><span class=\"keyword operator logical js\"><span>||</span></span><span>&nbsp;</span><span class=\"support variable dom js\"><span>document</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>getElementsByTagName</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>body</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric decimal js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>appendChild</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>ds</span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span><span>(</span><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"source js embedded html\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition tag html\"><span>&lt;/</span></span><span class=\"entity name tag script html\"><span>script</span></span><span class=\"punctuation definition tag html\"><span>&gt;</span></span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment block html\"><span class=\"punctuation definition comment html\"><span>&lt;!--</span></span><span>多说js加载结束，一个页面只需要加载一次&nbsp;</span><span class=\"punctuation definition comment html\"><span>--&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;endif&nbsp;%}</span></span></div><div class=\"line\"><span class=\"text html basic\"><span class=\"meta tag block any html\"><span class=\"punctuation definition tag begin html\"><span>&lt;/</span></span><span class=\"entity name tag block any html\"><span>section</span></span><span class=\"punctuation definition tag end html\"><span>&gt;</span></span></span></span></div><div class=\"line\"><span class=\"text html basic\"><span>{%&nbsp;endif&nbsp;%}</span></span></div></pre>\n<p>如果没有评价，不需要显示孤零零的变迁，可以把 <code>duoshuo_asides</code> 设置成 <code>false</code>。</p>\n<p>最后在 <code>_config.yml</code> 的侧边栏数组中添加页面</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text plain null-grammar\"><span>default_asides:&nbsp;[asides/about.html,&nbsp;asides/recent_posts.html,&nbsp;asides/recent_comments.html,&nbsp;asides/links.html,&nbsp;asides/github.html,&nbsp;asides/delicious.html,&nbsp;asides/pinboard.html,&nbsp;asides/googleplus.html]</span></span></div></pre>\n<p>我选择在最新文章和链接之间显示最新评论。</p>\n<hr>","frontmatter":{"path":"/NgHhhZtj9hAW8PSWKfQB9WEH","title":"Octopress 博客添加多说评论系统","date":"2016-08-17 20:07:10 +0800","comments":true,"categories":"programming","author":"Sir0xb","tags":["octopress","多说"]}}},"pageContext":{}}