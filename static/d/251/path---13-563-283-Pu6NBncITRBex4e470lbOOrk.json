{"pageContext":{"group":[{"node":{"id":"d883ac12-5a98-51fd-b496-0ae482800847","html":"<blockquote>\n<p>为了演示流控制，简单实现了注入插件 gulp-aop</p>\n</blockquote>\n<h3>先看下 gulp-aop 注入插件的用法</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>gulp&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>concat&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-concat</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>aop&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-aop</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>task&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>default</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"storage type function coffee\"><span>-&gt;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>src&nbsp;</span><span class=\"meta brace square coffee\"><span>[</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>test/a.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>test/b.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta brace square coffee\"><span>]</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;concat&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>t.min.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;aop</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function coffee\"><span class=\"entity name function coffee\"><span>header</span></span></span><span class=\"keyword operator coffee\"><span>:</span></span><span>&nbsp;</span><span class=\"storage type function coffee\"><span>-&gt;</span></span><span>&nbsp;</span><span class=\"entity name type object coffee\"><span>console</span></span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span class=\"support function console coffee\"><span>log</span></span><span>&nbsp;</span><span class=\"string quoted single coffee\"><span class=\"punctuation definition string begin coffee\"><span>&#39;</span></span><span>Inject&nbsp;to&nbsp;the&nbsp;head</span><span class=\"punctuation definition string end coffee\"><span>&#39;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function coffee\"><span class=\"entity name function coffee\"><span>footer</span></span></span><span class=\"keyword operator coffee\"><span>:</span></span><span>&nbsp;</span><span class=\"storage type function coffee\"><span>-&gt;</span></span><span>&nbsp;</span><span class=\"entity name type object coffee\"><span>console</span></span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span class=\"support function console coffee\"><span>log</span></span><span>&nbsp;</span><span class=\"string quoted single coffee\"><span class=\"punctuation definition string begin coffee\"><span>&#39;</span></span><span>Inject&nbsp;to&nbsp;the&nbsp;end</span><span class=\"punctuation definition string end coffee\"><span>&#39;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>dest&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>./test</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div></pre>\n<!--more-->\n<p>了解 gulp 流控制之前先了解下 nodeJS 的流</p>\n<h2> </h2>\n<h3>nodeJS 四种流</h3>\n<p>nodeJS里有四种类型的流：Readable，Writable，Duplex，Transform</p>\n<p>Readable: 可读流</p>\n<p>Writable: 可写流</p>\n<p>Duplex: 双工流</p>\n<p>Transform: 转换流</p>\n<p>跟 Gulp 相关的主要是转换流</p>\n<blockquote>\n<p>gulp 流控制一般用如下两种方式</p>\n</blockquote>\n<h2> </h2>\n<h3>流截获方式一：</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;through&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta function-call js\"><span class=\"support function js\"><span>require</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>through-gulp</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"support variable js\"><span>module</span></span><span class=\"meta function js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>exports</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;stream&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>through</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"variable parameter function js\"><span>file</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;</span><span class=\"variable parameter function js\"><span>encoding</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;</span><span class=\"variable parameter function js\"><span>callback</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;sourceStr&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"variable other object js\"><span>file</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other object property js\"><span>contents</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>toString</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&nbsp;这里可以对代码进行处理</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>file</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>contents</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta class instance constructor js\"><span class=\"keyword operator new js\"><span>new</span></span><span>&nbsp;</span><span class=\"entity name type instance js\"><span>Buffer</span></span></span><span class=\"meta brace round js\"><span>(</span></span><span>sourceStr</span><span class=\"meta brace round js\"><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&nbsp;再往管道中注入修改后的内容</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>push</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>file</span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>callback</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>stream</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>on</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>end</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&nbsp;这里可以做些收尾工作</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;stream</span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div></pre>\n<h2> </h2>\n<h3>流截获方式二：</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;through&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta function-call js\"><span class=\"support function js\"><span>require</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>through2</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;fs&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta function-call js\"><span class=\"support function js\"><span>require</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>fs</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"support variable js\"><span>module</span></span><span class=\"meta function js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>exports</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"variable parameter function js\"><span>opt</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;aopHeader&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>(</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"keyword operator js\"><span>+</span></span><span>&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"variable other object js\"><span>opt</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>header</span></span><span>&nbsp;</span><span class=\"keyword operator logical js\"><span>||</span></span><span>&nbsp;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>toString</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"keyword operator js\"><span>+</span></span><span>&nbsp;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>());</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;aopFooter&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>(</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"keyword operator js\"><span>+</span></span><span>&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"variable other object js\"><span>opt</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>footer</span></span><span>&nbsp;</span><span class=\"keyword operator logical js\"><span>||</span></span><span>&nbsp;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>toString</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"keyword operator js\"><span>+</span></span><span>&nbsp;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>());</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"entity name function js\"><span>bufferContents</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"variable parameter function js\"><span>file</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;</span><span class=\"variable parameter function js\"><span>encoding</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;</span><span class=\"variable parameter function js\"><span>callback</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>if</span></span><span>&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"variable other object js\"><span>file</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>isNull</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"meta brace round js\"><span>)</span></span><span>&nbsp;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>push</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>file</span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>callback</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>if</span></span><span>&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"variable other object js\"><span>file</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>isStream</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"meta brace round js\"><span>)</span></span><span>&nbsp;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>push</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>file</span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>callback</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>if</span></span><span>&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"variable other object js\"><span>file</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>isBuffer</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"meta brace round js\"><span>)</span></span><span>&nbsp;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>file</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>contents</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta class instance constructor js\"><span class=\"keyword operator new js\"><span>new</span></span><span>&nbsp;</span><span class=\"entity name type instance js\"><span>Buffer</span></span></span><span class=\"meta brace round js\"><span>(</span></span><span>aopHeader&nbsp;</span><span class=\"keyword operator js\"><span>+</span></span><span>&nbsp;</span><span class=\"variable other object js\"><span>file</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other object property js\"><span>contents</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>toString</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>utf8</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"keyword operator js\"><span>+</span></span><span>&nbsp;aopFooter</span><span class=\"meta brace round js\"><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>push</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>file</span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>callback</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"entity name function js\"><span>endStream</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"variable parameter function js\"><span>callback</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&nbsp;这里可以做些收尾工作</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>callback</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;</span><span class=\"variable other object js\"><span>through</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>obj</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>bufferContents</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;endStream</span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div></pre>\n<blockquote>\n<p>编写自己的 Gulp 插件，流控制是基础。</p>\n</blockquote>\n<hr>","frontmatter":{"path":"/m5EMxLkw8rhWmyW1AEQWOQ7u","title":"Gulp流控制","date":"2016-01-31 23:38:00 +0800","comments":true,"categories":"programming","author":"Sir0xb","tags":["coffee","gulp"]},"excerpt":"为了演示流控制，简单实现了注入插件 gulp-aop 先看下 gulp-aop 注入插件的用法 了解 gulp 流控制之前先了解下 nodeJS 的流   nodeJS 四种流 nodeJS里有四种类型的流：Readable，Writable，Duplex，Transform…"}},{"node":{"id":"6529f711-9320-5845-a3b6-43d4172b8cd9","html":"<h3>类的定义：</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;Clazz&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;</span><span class=\"meta function js\"><span class=\"entity name function js\"><span>Clazz</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span><span>&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initializing&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"constant language boolean false js\"><span>false</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;superPattern&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span class=\"string regexp js\"><span>&nbsp;</span><span class=\"punctuation definition string begin js\"><span>/</span></span><span>xyz</span><span class=\"punctuation definition string end js\"><span>/</span></span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>test</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span><span>&nbsp;xyz</span><span class=\"punctuation terminator statement js\"><span>;</span></span><span>&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"keyword operator ternary js\"><span>?</span></span><span class=\"string regexp js\"><span>&nbsp;</span><span class=\"punctuation definition string begin js\"><span>/</span></span><span class=\"keyword control anchor regexp\"><span>\\b</span></span><span>_super</span><span class=\"keyword control anchor regexp\"><span>\\b</span></span><span class=\"punctuation definition string end js\"><span>/</span></span></span><span>&nbsp;</span><span class=\"keyword operator ternary js\"><span>:</span></span><span class=\"string regexp js\"><span>&nbsp;</span><span class=\"punctuation definition string begin js\"><span>/</span></span><span class=\"constant character character-class regexp\"><span>.</span></span><span class=\"keyword operator quantifier regexp\"><span>*</span></span><span class=\"punctuation definition string end js\"><span>/</span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>Clazz</span></span><span class=\"meta function js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>create</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"variable parameter function js\"><span>properties</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;_super&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property js\"><span>prototype</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initializing&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"constant language boolean true js\"><span>true</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;proto&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta class instance constructor js\"><span class=\"keyword operator new js\"><span>new</span></span><span>&nbsp;</span><span class=\"entity name type instance js\"><span>this</span></span></span><span class=\"meta brace round js\"><span>(</span><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initializing&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"constant language boolean false js\"><span>false</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>for</span></span><span>&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;name&nbsp;</span><span class=\"keyword operator in js\"><span>in</span></span><span>&nbsp;properties</span><span class=\"meta brace round js\"><span>)</span></span><span>&nbsp;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proto</span><span class=\"meta brace square js\"><span>[</span></span><span>name</span><span class=\"meta brace square js\"><span>]</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"keyword operator typeof js\"><span>typeof</span></span><span>&nbsp;properties</span><span class=\"meta brace square js\"><span>[</span></span><span>name</span><span class=\"meta brace square js\"><span>]</span></span><span>&nbsp;</span><span class=\"keyword operator comparison js\"><span>==</span></span><span>&nbsp;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>function</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"keyword operator logical js\"><span>&amp;&amp;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword operator typeof js\"><span>typeof</span></span><span>&nbsp;_super</span><span class=\"meta brace square js\"><span>[</span></span><span>name</span><span class=\"meta brace square js\"><span>]</span></span><span>&nbsp;</span><span class=\"keyword operator comparison js\"><span>==</span></span><span>&nbsp;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>function</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"keyword operator logical js\"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class=\"variable other object js\"><span>superPattern</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>test</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>properties</span><span class=\"meta brace square js\"><span>[</span></span><span>name</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"keyword operator ternary js\"><span>?</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"variable parameter function js\"><span>name</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;</span><span class=\"variable parameter function js\"><span>fn</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;tmp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>_super</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>_super</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;_super</span><span class=\"meta brace square js\"><span>[</span></span><span>name</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;ret&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"variable other object js\"><span>fn</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>apply</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;</span><span class=\"variable language js\"><span>arguments</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>_super</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;tmp</span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;ret</span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span><span>(</span></span><span>name</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;properties</span><span class=\"meta brace square js\"><span>[</span></span><span>name</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta brace round js\"><span>)</span></span><span>&nbsp;</span><span class=\"keyword operator ternary js\"><span>:</span></span><span>&nbsp;properties</span><span class=\"meta brace square js\"><span>[</span></span><span>name</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"entity name function js\"><span>_Clazz</span></span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>if</span></span><span>&nbsp;</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"keyword operator logical js\"><span>!</span></span><span>initializing&nbsp;</span><span class=\"keyword operator logical js\"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>init</span></span><span class=\"meta brace round js\"><span>)</span></span><span>&nbsp;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other object property js\"><span>init</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>apply</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&nbsp;</span><span class=\"variable language js\"><span>arguments</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>_Clazz</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property js\"><span>prototype</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;proto</span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>_Clazz</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property js\"><span>constructor</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;Clazz</span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable other object js\"><span>_Clazz</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>create</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"variable language js\"><span>arguments</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support variable property dom js\"><span>callee</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;_Clazz</span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;Clazz</span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>(</span><span>)</span><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div></pre>\n<!--more-->\n<h2> </h2>\n<h3>类的使用：</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;Person&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"variable other object js\"><span>Clazz</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>create</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"meta brace curly js\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function json js\"><span class=\"entity name function js\"><span>init</span></span><span class=\"keyword operator assignment js\"><span>:</span></span><span>&nbsp;</span><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"variable parameter function js\"><span>isDancing</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>dancing</span></span><span>&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;isDancing</span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function json js\"><span class=\"entity name function js\"><span>dance</span></span><span class=\"keyword operator assignment js\"><span>:</span></span><span>&nbsp;</span><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>dancing</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;Child&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"variable other object js\"><span>Person</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>create</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"meta brace curly js\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function json js\"><span class=\"entity name function js\"><span>init</span></span><span class=\"keyword operator assignment js\"><span>:</span></span><span>&nbsp;</span><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>_super</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"constant language boolean false js\"><span>false</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function json js\"><span class=\"entity name function js\"><span>dance</span></span><span class=\"keyword operator assignment js\"><span>:</span></span><span>&nbsp;</span><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;</span><span class=\"variable language js\"><span>this</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>_super</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta function json js\"><span class=\"entity name function js\"><span>swiming</span></span><span class=\"keyword operator assignment js\"><span>:</span></span><span>&nbsp;</span><span class=\"storage type function js\"><span>function</span></span><span>&nbsp;</span><span class=\"meta parameters js\"><span class=\"punctuation definition parameters begin bracket round js\"><span>(</span></span><span class=\"punctuation definition parameters end bracket round js\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\"punctuation definition function body begin bracket curly js\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword control js\"><span>return</span></span><span>&nbsp;</span><span class=\"constant language boolean true js\"><span>true</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation definition function body end bracket curly js\"><span>}</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta arguments js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;person&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta class instance constructor js\"><span class=\"keyword operator new js\"><span>new</span></span><span>&nbsp;</span><span class=\"entity name type instance js\"><span>Person</span></span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"constant language boolean true js\"><span>true</span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&nbsp;child&nbsp;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&nbsp;</span><span class=\"meta class instance constructor js\"><span class=\"keyword operator new js\"><span>new</span></span><span>&nbsp;</span><span class=\"entity name type instance js\"><span>Child</span></span></span><span class=\"meta brace round js\"><span>(</span><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>家长能跳舞.</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"variable other object js\"><span>person</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>dance</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>孩子能游泳</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"variable other object js\"><span>child</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>swiming</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>孩子不会跳舞.</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"variable other object js\"><span>child</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>dance</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>家长是人类.</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>person&nbsp;</span><span class=\"keyword operator instanceof js\"><span>instanceof</span></span><span>&nbsp;Person</span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&#39;</span></span><span>孩子也是人类.</span><span class=\"punctuation definition string end js\"><span>&#39;</span></span></span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object console js\"><span>console</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function console js\"><span>log</span></span><span class=\"meta arguments js\"><span class=\"punctuation definition arguments begin bracket round js\"><span>(</span></span><span>child&nbsp;</span><span class=\"keyword operator instanceof js\"><span>instanceof</span></span><span>&nbsp;Child&nbsp;</span><span class=\"keyword operator logical js\"><span>&amp;&amp;</span></span><span>&nbsp;child&nbsp;</span><span class=\"keyword operator instanceof js\"><span>instanceof</span></span><span>&nbsp;Person</span><span class=\"punctuation definition arguments end bracket round js\"><span>)</span></span></span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div></pre>\n<hr>","frontmatter":{"path":"/ZFR4s3OTFvgwRvL50hiVwpY5","title":"JavaScript实现类效果","date":"2016-01-27 11:00:00 +0800","comments":true,"categories":"programming","author":"Sir0xb","tags":["javascript"]},"excerpt":"类的定义：   类的使用："}},{"node":{"id":"38fa7528-73f5-544e-95e1-4ebad7e3a1c5","html":"<h3>js 压缩合并</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>gulp&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>jshint&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-jshint</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>concat&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-concat</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>uglify&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-uglify</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>task&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>script</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"storage type function coffee\"><span>-&gt;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>src&nbsp;</span><span class=\"meta brace square coffee\"><span>[</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>xxx</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>yyy</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta brace square coffee\"><span>]</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;jshint</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;concat&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>base.min.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;uglify</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;混淆</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>dest&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>输出目录</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div></pre>\n<!--more-->\n<h2> </h2>\n<h3>js 压缩不合并</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>gulp&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>jshint&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-jshint</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>rename&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-rename</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>uglify&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-uglify</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>sourcemaps&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-sourcemaps</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>task&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>script</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"storage type function coffee\"><span>-&gt;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>src&nbsp;</span><span class=\"meta brace square coffee\"><span>[</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>xxx.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>!xxx.min.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>yyy.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>!yyy.min.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta brace square coffee\"><span>]</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;sourcemaps</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>init</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;jshint</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;rename</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>extname</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>.min.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;uglify</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>mangle</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean false coffee\"><span>no</span></span><span>&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;不混淆</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;sourcemaps</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>write&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>./</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>dest&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>./</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div></pre>\n<h2> </h2>\n<h3>js 压缩加版本号</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>path&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>path</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>gulp&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>plumber&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-plumber</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>jshint&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-jshint</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>rename&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-rename</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>uglify&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-uglify</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>rev&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-rev</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>task&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>script</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"storage type function coffee\"><span>-&gt;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>src&nbsp;</span><span class=\"meta brace square coffee\"><span>[</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>xxxx.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>!xxx.min.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta brace square coffee\"><span>]</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;plumber</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;jshint</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;rename</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>extname</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>.min.js</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;uglify</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>managle</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean false coffee\"><span>no</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;rev</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;加版本号</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>dest&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>压缩文件</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;rev</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>manifest&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;这部分解决&nbsp;js&nbsp;html&nbsp;同时压缩时映射文件被覆盖问题</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>path&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;path</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span class=\"support function method array coffee\"><span>join</span></span><span>&nbsp;</span><span class=\"support variable coffee\"><span>__dirname</span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>映射文件目录/</span><span class=\"source coffee embedded source\"><span class=\"punctuation section embedded coffee\"><span>#{</span></span><span>appName</span><span class=\"punctuation section embedded coffee\"><span>}</span></span></span><span>/rev-manifest.json</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>cwd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;path</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span class=\"support function method array coffee\"><span>join</span></span><span>&nbsp;</span><span class=\"support variable coffee\"><span>__dirname</span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>映射文件目录</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>merge&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>yes</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>dest&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>版本文件输出目录</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div></pre>\n<h2> </h2>\n<h3>css 压缩合并</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>gulp&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>rename&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-rename</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>cssImport&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-cssimport</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>cssmin&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-cssmin</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>task&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>css</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"storage type function coffee\"><span>-&gt;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>src&nbsp;</span><span class=\"meta brace square coffee\"><span>[</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>xxx</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>yyy</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta brace square coffee\"><span>]</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;rename</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>extname</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>.min.css</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;cssImport</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;cssmin</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>compatibility</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>ie7</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>dest&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>输出目录</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div></pre>\n<h2> </h2>\n<h3>html 压缩</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>gulp&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>plumber&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-plumber</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>htmlmin&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-htmlmin</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>rename&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-rename</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>task&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>html</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"storage type function coffee\"><span>-&gt;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>options&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>removeComments&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean false coffee\"><span>false</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;清除HTML注释</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>collapseWhitespace&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;压缩HTML</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>collapseBooleanAttributes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;省略布尔属性的值&nbsp;&lt;input&nbsp;checked=&quot;true&quot;/&gt;&nbsp;====&gt;&nbsp;&lt;input&nbsp;/&gt;</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>removeEmptyAttributes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;删除所有空格作属性值&nbsp;&lt;input&nbsp;id=&quot;&quot;&nbsp;/&gt;&nbsp;====&gt;&nbsp;&lt;input&nbsp;/&gt;</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>removeScriptTypeAttributes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;删除&lt;script&gt;的type=&quot;text/javascript&quot;</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>removeStyleLinkTypeAttributes&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;删除&lt;style&gt;和&lt;link&gt;的type=&quot;text/css&quot;</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>minifyJS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;压缩页面JS</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>minifyCSS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;压缩页面CSS</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>src&nbsp;</span><span class=\"meta brace square coffee\"><span>[</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>xxx/**/*.html</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>!xxx/**/*.min.html</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta brace square coffee\"><span>]</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;plumber</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span><span>&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;出错不跳出</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;htmlmin&nbsp;options</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;rename</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>extname</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>.min.html</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>dest&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>输出目录</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div></pre>\n<h2> </h2>\n<h3>html 压缩加版本号</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>path&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>path</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>gulp&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>plumber&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-plumber</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>htmlmin&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-htmlmin</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>rename&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-rename</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>rev&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span><span>&nbsp;</span><span class=\"support function coffee\"><span>require</span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>gulp-rev</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>task&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>html</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"storage type function coffee\"><span>-&gt;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>options&nbsp;</span><span class=\"keyword operator coffee\"><span>=</span></span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>removeComments&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean false coffee\"><span>false</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;清除HTML注释</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>collapseWhitespace&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;压缩HTML</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>collapseBooleanAttributes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;省略布尔属性的值&nbsp;&lt;input&nbsp;checked=&quot;true&quot;/&gt;&nbsp;====&gt;&nbsp;&lt;input&nbsp;/&gt;</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>removeEmptyAttributes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;删除所有空格作属性值&nbsp;&lt;input&nbsp;id=&quot;&quot;&nbsp;/&gt;&nbsp;====&gt;&nbsp;&lt;input&nbsp;/&gt;</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>removeScriptTypeAttributes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;删除&lt;script&gt;的type=&quot;text/javascript&quot;</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>removeStyleLinkTypeAttributes&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;删除&lt;style&gt;和&lt;link&gt;的type=&quot;text/css&quot;</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>minifyJS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;压缩页面JS</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>minifyCSS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>true</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;压缩页面CSS</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>src&nbsp;</span><span class=\"meta brace square coffee\"><span>[</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>xxx/**/*.html</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>!xxx/**/*.min.html</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span><span class=\"meta brace square coffee\"><span>]</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;plumber</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span><span>&nbsp;&nbsp;</span><span class=\"comment line number-sign coffee\"><span class=\"punctuation definition comment coffee\"><span>#</span></span><span>&nbsp;出错不跳出</span><span>&nbsp;</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;htmlmin&nbsp;options</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;rename</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>extname</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>.min.html</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;rev</span><span class=\"meta brace round coffee\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>dest&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>压缩文件输出目录</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;rev</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>manifest</span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>path&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;path</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span class=\"support function method array coffee\"><span>join</span></span><span>&nbsp;</span><span class=\"support variable coffee\"><span>__dirname</span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>映射文件输出目录/rev-manifest.json</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>cwd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;path</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span class=\"support function method array coffee\"><span>join</span></span><span>&nbsp;</span><span class=\"support variable coffee\"><span>__dirname</span></span><span class=\"meta delimiter object comma coffee\"><span>,&nbsp;</span></span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>映射文件输出目录</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"variable assignment coffee\"><span class=\"variable assignment coffee\"><span>merge&nbsp;&nbsp;&nbsp;</span><span class=\"punctuation separator key-value\"><span>:</span></span></span></span><span>&nbsp;</span><span class=\"constant language boolean true coffee\"><span>yes</span></span></span></div><div class=\"line\"><span class=\"source coffee\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>pipe&nbsp;gulp</span><span class=\"meta delimiter method period coffee\"><span>.</span></span><span>dest&nbsp;</span><span class=\"string quoted double coffee\"><span class=\"punctuation definition string begin coffee\"><span>&quot;</span></span><span>版本文件输出目录</span><span class=\"punctuation definition string end coffee\"><span>&quot;</span></span></span></span></div></pre>\n<blockquote>\n<p>基本上平时会用到的功能都覆盖到了，高级用法控制文件流的找时间再整理整理</p>\n</blockquote>\n<hr>","frontmatter":{"path":"/fnrdoaUSK7UChWUhYSpxHPqg","title":"Gulp常用脚本","date":"2016-01-26 14:20:38 +0800","comments":true,"categories":"programming","author":"Sir0xb","tags":["coffee","gulp"]},"excerpt":"js 压缩合并   js 压缩不合并   js 压缩加版本号   css 压缩合并   html 压缩   html 压缩加版本号 基本上平时会用到的功能都覆盖到了，高级用法控制文件流的找时间再整理整理"}},{"node":{"id":"292fc140-4ae4-5c44-b959-403491b7e2de","html":"<p>听说 swiftype 很好用，就在网站里加入了这个功能，没想到的是从注册到真正能用上竟然花了差不多一个月的时间，主要原因是除了随处可见的教程中那些配置之外，还要有额外的配置，真是坑爹啊。。。</p>\n<h3>注册 swiftype 账号</h3>\n<p>到 <a href=\"http://www.swiftype.com\">http://www.swiftype.com</a> 注册账号</p>\n<h2> </h2>\n<h3>配置搜索</h3>\n<p>一路跟着提示，选择默认下一步下一步，直到完成</p>\n<!--more-->\n<h2> </h2>\n<h3>配置网站搜索</h3>\n<p>在搜索栏 input 元素上增加 <code>st-default-search-input</code> 这个类</p>\n<h2> </h2>\n<h3>注意一下两点</h3>\n<h4>1.在这个界面试着搜索下，如果搜索不出东西说明网站配置有问题，注意是网站配置有问题，不是 swiftype 配置有问题。</h4>\n<img src=\"https://i.imgur.com/7w1snfP.png\" />\n<h4>2.在 source 目录放 robots.txt 文件。</h4>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text xml\"><span>Sitemap:&nbsp;/sitemap.xml</span></span></div></pre>\n<p><strong>* sitemap 是 hexo 插件自己生成的 *</strong></p>\n<hr>","frontmatter":{"path":"/lnyT51FSfviU8se9chgTxZ5L","title":"用 swiftype 配置静态搜索","date":"2015-06-08 10:03:45 +0800","comments":true,"categories":"programming","author":null,"tags":["hexo","swiftype"]},"excerpt":"听说 swiftype 很好用，就在网站里加入了这个功能，没想到的是从注册到真正能用上竟然花了差不多一个月的时间，主要原因是除了随处可见的教程中那些配置之外，还要有额外的配置，真是坑爹啊。。。 注册 swiftype 账号 到  http://www.swiftype.com…"}},{"node":{"id":"ef24699e-cfce-51f6-b1aa-9877b66bf0e8","html":"<p>独立域名指向 Github 服务器 IP ，并在站点增加 CNAME 文件之后，收到了无数个 GitHub 提示邮件。\n<img src=\"https://i.imgur.com/TKSbJmc.jpg\" /></p>\n<!--more-->\n<p>只要通过 GitHub 帮助中的内容，做一下 IP 调整，邮件就不会再来了。</p>\n<h3>打开控制台输入以下命令(pages 地址自行修改)</h3>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source ruby\"><span>dig&nbsp;sir0xb</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>github</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>io&nbsp;</span><span class=\"keyword operator arithmetic ruby\"><span>+</span></span><span>nostats&nbsp;</span><span class=\"keyword operator arithmetic ruby\"><span>+</span></span><span>nocomments&nbsp;</span><span class=\"keyword operator arithmetic ruby\"><span>+</span></span><span>nocmd</span></span></div></pre>\n<p>得到如下结果：</p>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"source ruby\"><span class=\"variable other constant ruby\"><span>Sir0xb</span></span><span class=\"variable other readwrite instance ruby\"><span class=\"punctuation definition variable ruby\"><span>@</span></span><span>mac</span></span><span class=\"constant other symbol ruby\"><span class=\"punctuation definition constant ruby\"><span>:</span></span><span>/</span></span><span>&nbsp;</span><span class=\"keyword operator comparison ruby\"><span>&gt;</span></span><span>&nbsp;dig&nbsp;sir0xb</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>github</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>io&nbsp;</span><span class=\"keyword operator arithmetic ruby\"><span>+</span></span><span>nostats&nbsp;</span><span class=\"keyword operator arithmetic ruby\"><span>+</span></span><span>nocomments&nbsp;</span><span class=\"keyword operator arithmetic ruby\"><span>+</span></span><span>nocmd</span></span></div><div class=\"line\"><span class=\"source ruby\"><span class=\"punctuation separator statement ruby\"><span>;</span><span>;</span></span><span>&nbsp;global&nbsp;</span><span class=\"constant other symbol hashkey ruby\"><span>options</span><span class=\"punctuation definition constant ruby\"><span>:</span></span></span><span>&nbsp;</span><span class=\"keyword operator arithmetic ruby\"><span>+</span></span><span>cmd</span></span></div><div class=\"line\"><span class=\"source ruby\"><span class=\"punctuation separator statement ruby\"><span>;</span></span><span>sir0xb</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>github</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>io</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>A</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>sir0xb</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>github</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>io</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>2237</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>CNAME</span></span><span>\tgithub</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>map</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>fastly</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>github</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>map</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>fastly</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>600</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>A</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>103.245</span></span><span class=\"punctuation separator method ruby\"><span>.</span></span><span class=\"constant numeric ruby\"><span>222.133</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>fastly</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t\t</span><span class=\"constant numeric ruby\"><span>35474</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>NS</span></span><span>\tns3</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>p04</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>dynect</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>fastly</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t\t</span><span class=\"constant numeric ruby\"><span>35474</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>NS</span></span><span>\tns2</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>p04</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>dynect</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>fastly</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t\t</span><span class=\"constant numeric ruby\"><span>35474</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>NS</span></span><span>\tns4</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>p04</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>dynect</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>fastly</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t\t</span><span class=\"constant numeric ruby\"><span>35474</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>NS</span></span><span>\tns1</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>p04</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>dynect</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>ns1</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>p04</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>dynect</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>37980</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>A</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>208.78</span></span><span class=\"punctuation separator method ruby\"><span>.</span></span><span class=\"constant numeric ruby\"><span>70.4</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>ns1</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>p04</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>dynect</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>179</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>AAAA</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>2001</span></span><span class=\"punctuation separator other ruby\"><span>:</span></span><span class=\"constant numeric ruby\"><span>500</span></span><span class=\"punctuation separator other ruby\"><span>:</span></span><span class=\"constant numeric ruby\"><span>90</span></span><span class=\"punctuation separator other ruby\"><span>:</span></span><span class=\"constant numeric ruby\"><span>1</span></span><span class=\"punctuation separator other ruby\"><span>:</span><span>:</span></span><span class=\"constant numeric ruby\"><span>4</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>ns2</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>p04</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>dynect</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>36368</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>A</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>204.13</span></span><span class=\"punctuation separator method ruby\"><span>.</span></span><span class=\"constant numeric ruby\"><span>250.4</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>ns3</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>p04</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>dynect</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>62102</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>A</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>208.78</span></span><span class=\"punctuation separator method ruby\"><span>.</span></span><span class=\"constant numeric ruby\"><span>71.4</span></span></span></div><div class=\"line\"><span class=\"source ruby\"><span>ns4</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>p04</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>dynect</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>net</span><span class=\"punctuation separator method ruby\"><span>.</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>35616</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>IN</span></span><span>\t</span><span class=\"variable other constant ruby\"><span>A</span></span><span>\t</span><span class=\"constant numeric ruby\"><span>204.13</span></span><span class=\"punctuation separator method ruby\"><span>.</span></span><span class=\"constant numeric ruby\"><span>251.4</span></span></span></div></pre>\n<h2> </h2>\n<h3>设置 DNS 配置</h3>\n<img src=\"https://i.imgur.com/Bh6Yehc.jpg\" />\n<p>到此，不会再收到 Github 提示邮件了</p>\n<hr>","frontmatter":{"path":"/jSFkUdGpeX6JZtYQ7fTjMbQC","title":"解决 Github 邮件中提示的问题","date":"2015-05-27 23:14:24 +0800","comments":true,"categories":"programming","author":"Sir0xb","tags":["github","email","warning"]},"excerpt":"独立域名指向 Github 服务器 IP ，并在站点增加 CNAME 文件之后，收到了无数个 GitHub 提示邮件。\n 只要通过 GitHub 帮助中的内容，做一下 IP 调整，邮件就不会再来了。 打开控制台输入以下命令(pages…"}}],"pathPrefix":"","first":false,"last":false,"index":13,"pageCount":30,"additionalContext":{}}}