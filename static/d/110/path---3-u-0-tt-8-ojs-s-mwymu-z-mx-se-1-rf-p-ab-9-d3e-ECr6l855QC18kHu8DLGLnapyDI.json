{"data":{"markdownRemark":{"html":"<h4># 生成日期</h4>\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text plain null-grammar\"><span>echo&nbsp;%DATE:~0,4%.%DATE:~5,2%.%DATE:~8,2%</span></span></div></pre>\n<p>结果是：xxxx.xx.xx</p>\n<h4># 生成昨天的日期</h4>\n<p>将如下代码制作成 <code>xx.bat</code>。获得昨天日期的方法是 <code>xx.bat -1</code>。同理想获得10天后的日期是 <code>xx.bat 10</code>。</p>\n<!--more-->\n<pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"text plain null-grammar\"><span>@echo&nbsp;off&nbsp;&amp;&nbsp;setlocal</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>if&nbsp;[%1]==[]&nbsp;goto&nbsp;:Help</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>call&nbsp;:GetDayDiff&nbsp;%date:~0,10%&nbsp;%1&nbsp;&amp;goto&nbsp;:EOF</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>:GetDayDiff</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>call&nbsp;:Date2Day&nbsp;%1&nbsp;days</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>set/a&nbsp;days=%days%+%2</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>call&nbsp;:Day2Date&nbsp;%days%&nbsp;result</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>echo&nbsp;%result%&nbsp;&amp;goto&nbsp;:EOF</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>:Date2Day</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>setlocal&nbsp;ENABLEEXTENSIONS</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>for&nbsp;/f&nbsp;&quot;tokens=1-3&nbsp;delims=/-,&nbsp;&quot;&nbsp;%%a&nbsp;in&nbsp;(&#39;echo/%1&#39;)&nbsp;do&nbsp;(set&nbsp;yy=%%a&nbsp;&amp;&nbsp;set&nbsp;mm=%%b&nbsp;&amp;&nbsp;set&nbsp;dd=%%c&nbsp;)</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>set&nbsp;/a&nbsp;dd=100%dd%%%100,mm=100%mm%%%100</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>set&nbsp;/a&nbsp;z=14-mm,z/=12,y=yy+4800-z,m=mm+12*z-3,j=153*m+2</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>set&nbsp;/a&nbsp;j=j/5+dd+y*365+y/4-y/100+y/400-2472633</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>endlocal&amp;set&nbsp;%2=%j%&amp;goto&nbsp;:EOF</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>:Day2Date</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>setlocal&nbsp;ENABLEEXTENSIONS</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>set&nbsp;/a&nbsp;i=%1,a=i+2472632,b=4*a+3,b/=146097,c=-b*146097,c/=4,c+=a</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>set&nbsp;/a&nbsp;d=4*c+3,d/=1461,e=-1461*d,e/=4,e+=c,m=5*e+2,m/=153,dd=153*m+2,dd/=5</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>set&nbsp;/a&nbsp;dd=-dd+e+1,mm=-m/10,mm*=12,mm+=m+3,yy=b*100+d-4800+m/10</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>(if&nbsp;%mm%&nbsp;LSS&nbsp;10&nbsp;set&nbsp;mm=0%mm%)&amp;(if&nbsp;%dd%&nbsp;LSS&nbsp;10&nbsp;set&nbsp;dd=0%dd%)</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>endlocal&amp;set&nbsp;%2=%yy%-%mm%-%dd%&amp;goto&nbsp;:EOF</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>:Help</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>echo&nbsp;xx&nbsp;10&nbsp;显示10天后的时间</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>echo&nbsp;xx&nbsp;-5&nbsp;显示&nbsp;5天前的时间</span></span></div><div class=\"line\"><span class=\"text plain null-grammar\"><span>rem&nbsp;-------&nbsp;EOF&nbsp;---------</span></span></div></pre>\n<hr>","frontmatter":{"path":"/3u0tt8ojsSMwymuZMxSe1RfP","title":"Windows批处理 - 日期","date":"2011-12-30 09:28:12 +0800","comments":true,"categories":"programming","author":"Sir0xb","tags":["windows","bat"]}}},"pageContext":{}}